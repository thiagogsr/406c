rule "LED State"
  when
     Item LED changed
  then
        if(LED.state == ON){
                LED_Input.sendCommand("OFF")
        }else{
                LED_Input.sendCommand("ON")
        }

      // wait for the command to complete
      // State will be NULL if not used before or ON while command is executed
      while(Office_Light.state != OFF){
         Thread::sleep(500)
      }

      // Trigger execution
      Office_Light.sendCommand(ON)

      // Logging of command line result
      logInfo("Your command exec", "Result:" + LED_Output.state )

      // If the returned string is just a number it can be parsed
      // If not a regex or another transformation can be used
      LED_LastExecution.postUpdate(
            (Integer::parseInt(LED_Output.state.toString) as Number )
      )
end
